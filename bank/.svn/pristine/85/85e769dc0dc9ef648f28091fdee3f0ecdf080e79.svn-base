<style>
    .detail{display:none}
</style>
<table class="layui-table">
    <thead>
        <tr>
            <th>简称</th>
            <th>全称</th>
            <th>工商注册号</th>
            <th>纳税人识别号</th>
            <th>组织机构代码</th>
            <th>统一社会信用代码</th>
            <th>成立日期</th>
            <th>核准日期</th>
            <th>法人代表</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
    <?php foreach ($list as $item) { ?>
        <tr>
            <td><?php echo $item['shortname']; ?></td>
            <td><?php echo $item['fullname']; ?></td>
            <td><?php echo $item['reg_No']; ?></td>
            <td><?php echo $item['taxpayer_ID']; ?></td>
            <td><?php echo $item['certificate_No']; ?></td>
            <td><?php echo $item['credit_No']; ?></td>
            <td><?php echo $item['establishment_date']; ?></td>
            <td><?php echo $item['approved_date']; ?></td>
            <td><?php echo $item['legal_representative']; ?></td>
            <td>
                <table class="detail" id="cid_<?php echo $item['cid']; ?>">
                    <tr><td>简称</td><td><?php echo $item['shortname']; ?></td></tr>
                    <tr> <td>全称</td><td><?php echo $item['fullname']; ?></td></tr>
                    <tr><td>工商注册号</td><td><?php echo $item['reg_No']; ?></td></tr>
                    <tr><td>纳税人识别号</td><td><?php echo $item['taxpayer_ID']; ?></td></tr>
                    <tr><td>组织机构代码</td><td><?php echo $item['certificate_No']; ?></td></tr>
                    <tr><td>统一社会信用代码</td><td><?php echo $item['credit_No']; ?></td></tr>
                    <tr><td>成立日期</td><td><?php echo $item['establishment_date']; ?></td></tr>
                    <tr><td>核准日期</td><td><?php echo $item['approved_date']; ?></td></tr>
                    <tr><td>法人代表</td><td><?php echo $item['legal_representative']; ?></td></tr>
                    <tr><td>企业类型</td><td><?php echo $item['company_type']; ?></td></tr>
                    <tr><td>工商登记机关</td><td><?php echo $item['authority']; ?></td></tr>
                    <tr><td>注册资本</td><td><?php echo $item['reg_capital']; ?></td></tr>
                    <tr><td>注册地址</td><td><?php echo $item['reg_address']; ?></td></tr>
                    <tr><td>营业期限</td><td><?php echo $item['operating_period']; ?></td></tr>
                    <tr>
                        <td colspan="2">
                            <div class="layui-collapse" lay-accordion>
                                <div class="layui-colla-item">
                                    <h2 class="layui-colla-title">经营范围</h2>
                                    <div class="layui-colla-content layui-show"><?php echo $item['business_scope']; ?></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
                <span lay-id="<?php echo $item['cid']; ?>" class="layui-btn layui-btn-mini layui-btn-normal">详情</span>
                <button class="layui-btn layui-btn-mini" title="编辑公司" url="<?php echo $base_url . 'company/edit/' . $item['cid']; ?>">
                    编辑
                </button>
            </td>
        </tr>
    <?php } ?>
    </tbody>
</table>
<script>
    layui.use(['element', 'layer'], function(){
        var $ = layui.jquery,
//            element = layui.element,
            layer = layui.layer,
            subNav = $('.layui-nav-child dd span:eq(8)', parent.document);

        /**
         * 监听编辑公司按钮
         */
        $('button').click(function(){
            subNav.attr('url', $(this).attr('url'));
            subNav.click();
        });

        /**
         * 监听公司详情按钮
         */
        $('.layui-btn-normal').click(function () {
            var cid = $(this).attr('lay-id');

            layer.open({
                type: 1,
                title: '公司详情',
                offset: 'auto',
                id: 'detail_' + cid,
                content: "<table class='layui-table'>" + $('#cid_' + cid).html() + "</table>",
                btn: '关闭',
                shade: 0,
                area: ['900px', '700px'],
                yes: function(){layer.closeAll();}
            });

        });
    });
</script>