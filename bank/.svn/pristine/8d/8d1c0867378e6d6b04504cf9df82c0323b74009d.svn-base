<?php
defined('BASEPATH') OR exit('No direct script access allowed');
/**
 * Class BankModel
 */
class CompanyModel extends Base_Model {

    public function __construct() {
        parent::__construct();
    }

    public function getCompanies($id = 0) {
//        $fields = '`id`, `shortname`, `fullname`';
        $fields = '*';

        if ($id) {
            $sql = "SELECT $fields FROM `company` WHERE cid = ?";

            return $this->select($sql, $id);
        } else {
            $sql = "SELECT $fields FROM `company`";

            return $this->select($sql);
        }
    }

    public function getCompaniesWithEemsiiCompany() {

        $sql = "SELECT t1.*, t2.shortname eshort, t2.fullname efull FROM `app_dkb`.`company` t1 ";
        $sql .= "LEFT JOIN `app_eemsii`.`company` t2 ON t1.`mapping_cid` = t2.id";

        return $this->select($sql);
    }

    public function add($data) {
        return $this->insert('company', $data);
    }
}