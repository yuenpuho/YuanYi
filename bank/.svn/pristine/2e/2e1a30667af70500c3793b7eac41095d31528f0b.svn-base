<style>
    .company{float:left}
    .company span{margin-left:15px;}
</style>
<table class="layui-table">
    <thead>
        <tr>
            <th>简称</th>
            <th>全称</th>
            <th>贷款的公司</th>
        </tr>
    </thead>
    <tbody>
    <?php foreach ($list as $item) { ?>
        <tr>
            <td><?php echo $item['bshort']; ?></td>
            <td>
                <?php echo $item['bfull']; ?>
                <span title="编辑银行" class="edit layui-btn layui-btn-mini" data-url="<?php echo $base_url . 'bank/edit/' . $item['bid']; ?>">
                    编辑
                </span>
            </td>
            <td>
            <?php if (isset($item['companies'])) {
                $mTop = (count($item['companies']) - 1) * 20 / 2;
            ?>
                <div class="company">
                    <?php foreach ($item['companies'] as $val) { ?>
                    <p><?php echo $val['cfull']; ?></p>
                    <?php } ?>
                </div>
                <div class="company" style="margin-top:<?php echo $mTop; ?>px">
                    <span title="解除公司" data-url="<?php echo $base_url . 'mapping/relievecompany/' . $item['bid']; ?>"
                          class="layui-btn layui-btn-mini layui-btn-danger">解除</span>
                </div>
            <?php } ?>
            </td>
        </tr>
    <?php } ?>
    </tbody>
</table>
<script>
    layui.use('element', function(){
        var $ = layui.jquery,
            navEdit = $('.layui-nav-child dd span:eq(3)', parent.document),
            navRelieve = $('.layui-nav-child dd span:eq(4)', parent.document);

        $('.edit').click(function(){
//            console.log(navEdit.attr('title'));
            navEdit.attr('url', $(this).data('url'));
            navEdit.click();
        });

        $('.layui-btn-danger').click(function(){
            navRelieve.attr('url', $(this).data('url'));
            navRelieve.click();
        });
    });
</script>